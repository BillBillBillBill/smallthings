#!/usr/bin/env python# -*- coding: utf-8 -*-import pymysqlimport osimport contextlibhost = os.getenv("APP_HOST", "localhost")port = int(os.getenv("APP_PORT", "8080"))DB_HOST = os.getenv("DB_HOST", "localhost")DB_PORT = int(os.getenv("DB_PORT", "3306"))DB_NAME = os.getenv("DB_NAME", "eleme")DB_USER = os.getenv("DB_USER", "root")DB_PASS = os.getenv("DB_PASS", "toor")@contextlib.contextmanagerdef db_query():    db = pymysql.connect(host=os.getenv("DB_HOST", "localhost"),                         port=int(os.getenv("DB_PORT", 3306)),                         user=os.getenv("DB_USER", "root"),                         passwd=os.getenv("DB_PASS", "toor"),                         db=os.getenv("DB_NAME", "eleme"))    try:        yield db    finally:        db.close()def load_users():    users = {}    with db_query() as db:        cur = db.cursor()        # load users        cur.execute("SELECT id, name, password FROM user")        for i, name, pw in cur.fetchall():            users[name] = {}            users[name]['user_id'] = i            users[name]['password'] = pw    return usersdef load_foods():    foods = {}    with db_query() as db:        cur = db.cursor()        cur.execute("SELECT id, stock, price FROM food")        for i, stock, price in cur.fetchall():            foods[str(i)] = int(price)    return foods